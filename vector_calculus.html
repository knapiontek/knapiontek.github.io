<!DOCTYPE html>
<html>
<head>
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/katex.min.css' integrity='sha384-wE+lCONuEo/QSfLb4AfrSk7HjWJtc4Xc1OiB2/aDBzHzjnlBP4SX7vjErTcwlA8C' crossorigin='anonymous'>
<link rel='stylesheet' href='common.css'>
<script src='https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/katex.min.js' integrity='sha384-tdtuPw3yx/rnUGmnLNWXtfjb9fpmwexsd+lr6HUYnUY4B7JhB5Ty7a1mYd+kto/s' crossorigin='anonymous'></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
<script src='util.js'></script>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<style>
#field1_canvas, #field2_canvas, #_rot1_canvas, #_rot2_canvas {
    position: relative;
    width: 450px;
    height: 450px;
    margin-left: auto;
    margin-right: auto;
    display: block;
    border: thin solid;
}
</style>
</head>
<body>
<div id='main_page'>

<h2>Vector Calculus in Cartesian Coordinates</h2>

<p>Let <m>U</m> be a scalar field and <m>E</m> a vector field</p>

<h3>Scalar Field Difference</h3>
<p>For arbitrary points <m>A</m> and <m>B</m></p>
<math>\Delta U = U(B)-U(A)</math>

<h3>Gradient of Scalar Field</h3>
<math>
\begin{aligned}
\bold{\nabla} U
&= \lim_{\Delta l\to 0}\frac{\Delta U}{\Delta l} \\
\\
&= \lim_{dx\to 0}\frac{U(x+dx)-U(x)}{dx}+\lim_{dy\to 0}\frac{U(y+dy)-U(y)}{dy}+\lim_{dz\to 0}\frac{U(z+dz)-U(z)}{dz} \\
\\
&= \frac{\partial U}{\partial x}+\frac{\partial U}{\partial y}+\frac{\partial U}{\partial z}
\end{aligned}
</math>

<h4>Line Integral</h4>
<math>\int_{l}\bold{E}\cdot\bold{dl} = \lim_{\Delta l\to 0}\sum \bold{E}\cdot\bold{\Delta l}</math>

<h4>Line Integral of Gradient</h4>
<math>\int_{l}\bold{\nabla} U\cdot\bold{dl} = \lim_{\Delta l\to 0}\sum\frac{\Delta U}{\Delta l}\cdot\bold{\Delta l} = \sum\Delta U = \Delta U</math>

<h4>Closed Line Integral of Gradient</h4>
<math>\oint_{l}\bold{\nabla} U\cdot\bold{dl} = \Delta U = 0</math>

<h3>Rotation of Vector Field</h3>
<math>\bold{\nabla}\times\bold{E} = \lim_{\Delta S\to 0}\frac{\oint_{l}\bold{E}\cdot\bold{dl}}{\Delta S}</math>

<p>Let's calculate <m>z</m> component along a path enclosing area <m>dxdy</m></p>
<math>
\begin{aligned}
\bold{\nabla}_z\times\bold{E}
&= \lim_{dxdy\to 0}\frac{E_x(x,y)dx+E_y(x+dx,y)dy-E_x(x+dx,y+dy)dx-E_y(x,y+dy)dy}{dxdy} \\
\\
&= \lim_{dxdy\to 0}\frac{E_y(x+dx,y)dy-E_y(x,y+dy)dy}{dxdy}-\frac{E_x(x+dx,y+dy)dx-E_x(x,y)dx}{dxdy} \\
\\
&= \lim_{dxdy\to 0}\frac{E_y(x+dx,y)-E_y(x,y+dy)}{dx}-\frac{E_x(x+dx,y+dy)-E_x(x,y)}{dy} \\
\\
&= \frac{\partial E_y}{\partial x}-\frac{\partial E_x}{\partial y}
\end{aligned}
</math>

<p>Where <m>E_y(x,y+dy)=-E_y(x,y)</m> and <m>E_x(x+dx,y)=-E_x(x,y)</m></p>


<p>Finally</p>
<math>
\bold{\nabla} \times E =
\begin{bmatrix}
\frac{\partial E_z}{\partial y} - \frac{\partial E_y}{\partial z} \\
\\
\frac{\partial E_x}{\partial z} - \frac{\partial E_z}{\partial x} \\
\\
\frac{\partial E_y}{\partial x} - \frac{\partial E_x}{\partial y}
\end{bmatrix}
</math>

<h4>Rotation of Gradient</h4>
<math>\bold{\nabla}\times\bold{\nabla} U = \lim_{\Delta S\to 0}\frac{\oint_{l}\bold{\nabla} U\cdot\bold{dl}}{\Delta S}</math>

<h4>Scalar Field of Rotation-Free Vector Field</h4>
<math>
\begin{aligned}
\bold{\nabla}\times\bold{E} & = 0 \\
& \Rightarrow \int\bold{E}\cdot\bold{dl} = 0 \\
\\
& \Rightarrow \int\bold{\nabla} U\cdot\bold{dl} = 0 \\
\\
& \Rightarrow \bold{E} = \bold{\nabla} U
\\
\end{aligned}
</math>

<h4>Closed Surface Integral of Rotation</h4>
<math>\oint_{S}(\bold{\nabla}\times\bold{E})\cdot\bold{dS} = \oint_{l}\bold{E}\cdot\bold{dl} = 0</math>

<h3>Divergance of Vector Field</h3>
<math>\bold{\nabla}\cdot\bold{E} = \lim_{\Delta V\to 0}\frac{\oint_{S}\bold{E}\cdot\bold{dS}}{\Delta V}</math>

<math>
\begin{aligned}
\bold{\nabla}\cdot\bold{E}
&= \lim_{dxdydz\to 0}\frac{-E_x(x)dydz+E_x(x+dx)dydz+\ldots}{dxdydz} \\
\\
&= \lim_{dx\to 0}\frac{E_x(x+dx)-E_x(x)}{dx}+\ldots \\
\\
&= \frac{\partial E_x}{\partial x} + \frac{\partial E_y}{\partial y} + \frac{\partial E_z}{\partial z}
\end{aligned}
</math>

<h4>Divergance of Free Field</h4>
<math>\bold{\nabla}\cdot\bold{E} = 0 \Rightarrow\bold{E} = \bold{\nabla}\times\bold{F}</math>

<h4>Volume Integral</h4>
<math>\int_{V}UdV = \lim_{dV\to 0}\sum UdV</math>

<h4>Volume Integral of Divergance</h4>
<math>\int_{V}(\bold{\nabla}\cdot\bold{E})dV = \lim_{dV\to 0}\sum\frac{\oint_{S}\bold{E}\cdot\bold{dS}}{\Delta V}\Delta V = \sum\oint_{S}\bold{E}\cdot\bold{dS} = \oint_{S}\bold{E}\cdot\bold{dS}</math>

<h3>Vector Field Example 1</h3>
<math>
A =
\begin{bmatrix}
y \\ -x \\ 0
\end{bmatrix}
</math>
<div id='field1_canvas'></div>

<p>Rotation</p>
<math>\bold{\nabla}\times A</math>
<div id='_rot1_canvas'></div>

<h3>Vector Field Example 2</h3>
<math>
A =
\begin{bmatrix}
y^2 \\ x \\ 0
\end{bmatrix}
</math>
<div id='field2_canvas'></div>

<p>Rotation</p>
<math>\bold{\nabla} \times A</math>
<div id='_rot2_canvas'></div>

</div>

<script>
function field1(pt) {
    return Point2D(2*pt.y, -2*pt.x)
}
function field2(pt) {
    return Point2D(pt.y*pt.y/2, pt.x)
}
function rot(pt, field_func) {
    var d = 0.1
    var v1 = field_func(pt.sub(d))
    var v2 = field_func(pt.add(d))
    return (v1.y - v2.y)/(2*d) - (v1.x - v2.x)/(2*d)
}
function render_field(anchor, field_func) {
    var canvas = Canvas(anchor)
    var center = Point2D(canvas.width(), canvas.height()).div(2)
    for(var x = -5; x <= 5; x++) {
        for(var y = -5; y <= 5; y++) {
            var pt = Point2D(x, y)
            var start = pt.mul(70).add(center)
            var end = field_func(pt).mul(7).add(start)
            canvas.pike_line(start, end)
        }
    }
}
function render_rot(anchor, field_func) {
    var canvas = Canvas(anchor)
    var d = 1.0
    var blue_style = {fill: 'blue'}
    var green_style = {fill: 'green'}
    var center = Point2D(canvas.width(), canvas.height()).div(2)
    for(var x = -5; x <= 5; x+=d) {
        for(var y = -5; y <= 5; y+=d) {
            var pt = Point2D(x, y)
            var start = pt.mul(70).add(center)

            var _rot = rot(pt, field_func)
            if(_rot < 0) {
                canvas.dot(start, -_rot, green_style)
            } else {
                canvas.dot(start, _rot, blue_style)
            }
        }
    }
}
function render_field1() {
    render_field('#field1_canvas', field1)
    render_rot('#_rot1_canvas', field1)
}
function render_field2() {
    render_field('#field2_canvas', field2)
    render_rot('#_rot2_canvas', field2)
}
render_field1()
render_field2()
render_katex()
</script>

</body>
</html>
